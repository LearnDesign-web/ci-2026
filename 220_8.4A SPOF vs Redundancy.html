
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Networking Fundamentals - SPOF vs Redundancy (8.4A)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Roboto+Mono:wght@400;700&display=swap');

        :root { 
            --accent-yellow: #ffdc00; 
            --accent-blue: #3f61c4; 
            --black: #000000; 
            --white: #ffffff; 
            --success: #27ae60; 
            --danger: #c0392b; 
            --grey: #95a5a6; 
        }

        body { font-family: 'Roboto', sans-serif; background: var(--white); padding: 20px; display: flex; flex-direction: column; align-items: center; margin: 0; }
        .container { width: 100%; max-width: 900px; border: 2px solid var(--black); padding: 20px; position: relative; box-sizing: border-box; }
        .branding { font-family: Arial; font-weight: bold; border-bottom: 1px solid var(--black); padding-bottom: 10px; margin-bottom: 20px; text-transform: uppercase; display: flex; justify-content: space-between; align-items: center; min-height: 20px; }

        /* Static Visualization Styles */
        .viz-box { background: #fafafa; border: 1px solid var(--black); margin-bottom: 20px; padding: 20px; text-align: center; position: relative; overflow: hidden; }

        svg { width: 100%; height: auto; max-height: 480px; overflow: visible; }

        /* Diagram specific styles */
        .node-rect { fill: white; stroke: var(--black); stroke-width: 2px; rx: 4; }
        .node-circle { fill: white; stroke: var(--black); stroke-width: 2px; }
        .node-label { font-family: 'Roboto', sans-serif; font-size: 11px; font-weight: bold; fill: var(--black); text-anchor: middle; pointer-events: none; }

        /* Packet Animation */
        @keyframes flow {
            to { stroke-dashoffset: -16; }
        }

        .connection { stroke: var(--grey); stroke-width: 2px; fill: none; transition: all 0.4s ease; stroke-dasharray: 4; opacity: 0.4; }
    
        .connection.primary { 
            stroke: var(--success); 
            opacity: 1; 
            stroke-dasharray: 8 8; 
            stroke-width: 3px; 
            animation: flow 1s linear infinite;
        }
    
        .connection.active-backup { 
            stroke: var(--accent-blue); 
            opacity: 1; 
            stroke-dasharray: 8 8; 
            stroke-width: 3px; 
            animation: flow 1s linear infinite; 
        }
    
        .connection.dead { stroke: var(--danger); opacity: 0.3; stroke-dasharray: 4; animation: none; }

        .fail-x { stroke: var(--danger); stroke-width: 4px; opacity: 0; transition: opacity 0.2s ease; }
        .failed .fail-x { opacity: 1; }
        .failed .node-rect, .failed .node-circle { stroke: var(--danger); fill: #fff5f5; }

        .cloud { fill: #f0f0f0; stroke: #bdc3c7; stroke-width: 2px; }

        /* Controls */
        .controls { display: flex; justify-content: center; gap: 15px; margin-bottom: 15px; }
        .btn { background: var(--black); color: white; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; border-radius: 4px; transition: background 0.2s; }
        .btn:hover { background: #333; }
        .btn.danger { background: var(--danger); }
        .btn.danger:hover { background: #a93226; }
        .btn.reset { background: var(--grey); }

        .desc-box { background: #f9f9f9; padding: 20px; border-left: 5px solid var(--accent-blue); margin-bottom: 20px; font-size: 15px; line-height: 1.6; }
        .desc-box ul { margin: 10px 0; padding-left: 20px; }
        .desc-box li { margin-bottom: 8px; }

        .tag { font-size: 10px; font-weight: bold; fill: white; text-anchor: middle; dominant-baseline: middle; }
        .tag-bg { fill: var(--danger); }

    </style>
</head>
<body>

    <div class="container">
              <div class="controls">
            <button class="btn danger" onclick="simulateFailure()">X Simulate Fiber Cut / Router Failure</button>
            <button class="btn reset" onclick="resetSim()">Reset System</button>
        </div>

        <div class="viz-box">
            <svg viewBox="0 0 800 460" id="network-diagram">
                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                        <path d="M0,0 L0,6 L9,3 z" fill="#000" />
                    </marker>
                    <!-- Cloud Path -->
                    <path id="cloud-path" d="M 25,60 C 25,35 45,35 55,35 C 55,15 95,15 95,35 C 105,35 125,35 125,60 C 125,85 95,85 95,85 L 55,85 C 25,85 25,60 25,60 Z" />
                </defs>

                <!-- LEFT SIDE: SPOF -->
                <g transform="translate(0,0)">
                    <text x="200" y="30" text-anchor="middle" font-weight="bold" font-family="Arial" font-size="16">Architecture A: SPOF</text>
                    <text x="200" y="50" text-anchor="middle" font-family="Arial" font-size="12" fill="#7f8c8d">(Single Point of Failure)</text>
            
                    <!-- Shift content down to prevent overlap -->
                    <g transform="translate(0, 40)">
                        <!-- Connections -->
                        <path class="connection primary spof-link" d="M 200,90 L 200,140" /> <!-- ISP to Router -->
                        <path class="connection primary spof-link-downstream" d="M 200,180 L 200,230" /> <!-- Router to Switch -->
                        <path class="connection primary spof-link-downstream" d="M 200,270 L 200,320" /> <!-- Switch to Server -->

                        <!-- Components -->
                        <!-- ISP -->
                        <use href="#cloud-path" x="125" y="5" class="cloud" />
                        <text x="200" y="60" class="node-label">ISP / WAN</text>

                        <!-- Router (SPOF) -->
                        <g id="spof-router" transform="translate(180, 140)">
                            <rect width="40" height="40" class="node-circle" rx="20" />
                            <text x="20" y="24" text-anchor="middle" font-size="10" font-weight="bold">R1</text>
                            <!-- Cross for failure -->
                            <path d="M 5,5 L 35,35 M 35,5 L 5,35" class="fail-x" />
                            <!-- Warning Tag -->
                            <rect x="25" y="-5" width="30" height="14" rx="2" class="tag-bg" />
                            <text x="40" y="2" class="tag">SPOF</text>
                        </g>


                                <!-- Switch -->
                                <g transform="translate(180, 230)">
                                    <rect width="40" height="40" class="node-rect" />
                                    <!-- Switch Arrows Icon -->
                                    <path d="M10,14 L30,14 M26,10 L30,14 L26,18" fill="none" stroke="var(--black)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M30,26 L10,26 M14,22 L10,26 L14,30" fill="none" stroke="var(--black)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </g>
                
                                <!-- Server -->
                                <g transform="translate(180, 320)">
                                    <rect width="40" height="60" class="node-rect" />
                                    <line x1="185" y1="330" x2="215" y2="330" stroke="black" stroke-width="1"/>
                                    <line x1="185" y1="335" x2="215" y2="335" stroke="black" stroke-width="1"/>
                                    <circle cx="200" cy="360" r="3" fill="#333"/>
                                </g>
                            </g>
                        </g>

                        <!-- Divider -->
                        <line x1="400" y1="20" x2="400" y2="420" stroke="#eee" stroke-width="2" stroke-dasharray="5"/>

                        <!-- RIGHT SIDE: HA -->
                        <g transform="translate(400,0)">
                            <text x="200" y="30" text-anchor="middle" font-weight="bold" font-family="Arial" font-size="16">Architecture B: Redundant</text>
                            <text x="200" y="50" text-anchor="middle" font-family="Arial" font-size="12" fill="#7f8c8d">(High Availability)</text>

                            <g transform="translate(0, 40)">
                                <!-- HA Connections -->
                                <!-- Primary Path (Router 1) -->
                                <path id="ha-link-1" class="connection primary ha-conn" d="M 200,90 L 140,140" /> <!-- ISP to R1 -->
                                <path id="ha-link-2" class="connection primary ha-conn" d="M 140,180 L 140,230" /> <!-- R1 to SW1 -->
                                <path id="ha-link-3" class="connection primary ha-conn" d="M 140,270 L 200,320" /> <!-- SW1 to Serv -->

                                <!-- Backup Path (Router 2 - Initially Standby) -->
                                <path id="ha-backup-1" class="connection" d="M 200,90 L 260,140" /> <!-- ISP to R2 -->
                                <path id="ha-backup-2" class="connection" d="M 260,180 L 260,230" /> <!-- R2 to SW2 -->
                                <path id="ha-backup-3" class="connection" d="M 260,270 L 200,320" /> <!-- SW2 to Serv -->

                                <!-- Cross Links (Mesh) -->
                                <path class="connection" d="M 140,180 L 260,230" opacity="0.1" /> 
                                <path class="connection" d="M 260,180 L 140,230" opacity="0.1" />

                                <!-- Components -->
                                <use href="#cloud-path" x="125" y="5" class="cloud" />
                
                                <!-- Router 1 (Primary) -->
                                <g id="ha-router1" transform="translate(120, 140)">
                                    <rect width="40" height="40" class="node-circle" rx="20" />
                                    <text x="20" y="24" text-anchor="middle" font-size="10" font-weight="bold">R1</text>
                                    <path d="M 5,5 L 35,35 M 35,5 L 5,35" class="fail-x" />
                                </g>

                                <!-- Router 2 (Backup) -->
                                <g id="ha-router2" transform="translate(240, 140)">
                                    <rect width="40" height="40" class="node-circle" rx="20" />
                                    <text x="20" y="24" text-anchor="middle" font-size="10" font-weight="bold">R2</text>
                                </g>
                
                                <!-- VRRP Label -->
                                <rect x="175" y="153" width="50" height="14" fill="#eee" rx="4"/>
                                <text x="200" y="163" text-anchor="middle" font-size="9" font-family="monospace">VRRP/HSRP</text>

                                <!-- Switch 1 -->
                                <g transform="translate(120, 230)">
                                    <rect width="40" height="40" class="node-rect" />
                                    <!-- Switch Arrows Icon -->
                                    <path d="M10,14 L30,14 M26,10 L30,14 L26,18" fill="none" stroke="var(--black)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M30,26 L10,26 M14,22 L10,26 L14,30" fill="none" stroke="var(--black)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </g>

                                <!-- Switch 2 -->
                                <g transform="translate(240, 230)">
                                    <rect width="40" height="40" class="node-rect" />
                                    <!-- Switch Arrows Icon -->
                                    <path d="M10,14 L30,14 M26,10 L30,14 L26,18" fill="none" stroke="var(--black)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M30,26 L10,26 M14,22 L10,26 L14,30" fill="none" stroke="var(--black)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </g>
        

                        <!-- Server (Dual NIC) -->
                        <g transform="translate(180, 320)">
                            <rect width="40" height="60" class="node-rect" />
                            <line x1="185" y1="330" x2="215" y2="330" stroke="black" stroke-width="1"/>
                            <line x1="185" y1="335" x2="215" y2="335" stroke="black" stroke-width="1"/>
                            <circle cx="200" cy="360" r="3" fill="#333"/>
                            <text x="60" y="30" font-size="10" fill="#666">Bonding Status: <tspan id="bond-status" fill="var(--success)" font-weight="bold">O.K.</tspan></text>
                        </g>
                    </g>
                </g>
        
                <!-- Status Message Overlay -->
                <text id="sim-status" x="400" y="445" text-anchor="middle" font-family="Roboto" font-weight="bold" fill="var(--black)" font-size="14">System Normal. Traffic flowing on primary paths.</text>

            </svg>
        </div>

        <div class="desc-box">
            <strong>Key Concept: Traffic Flow & Business Continuity</strong>
            <p>High Availability (HA) isn't just about buying two of everything. It's about how the network <em>reacts</em> when something breaks.</p>
            <ul class="mono">
                <li><strong>SPOF (Left):</strong> A single failure creates an outage. RTO is high (hours/days) because hardware must be physically replaced.</li>
                <li><strong>Redundant (Right):</strong> Duplicate paths allow automated failover protocols (like VRRP) to reroute traffic instantly. RTO is near-zero.</li>
            </ul>
        </div>
    
        <script>
            function simulateFailure() {
                // SPOF Failure Logic
                document.getElementById('spof-router').classList.add('failed');
                document.querySelectorAll('.spof-link-downstream').forEach(el => {
                    el.classList.remove('primary');
                    el.classList.add('dead');
                });
            
                // HA Failure Logic
                document.getElementById('ha-router1').classList.add('failed');
                // Kill Primary Paths
                document.querySelectorAll('.ha-conn').forEach(el => {
                    el.classList.remove('primary');
                    el.classList.add('dead');
                });
                // Activate Backup Paths
                setTimeout(() => {
                    document.getElementById('ha-backup-1').classList.add('active-backup');
                    document.getElementById('ha-backup-2').classList.add('active-backup');
                    document.getElementById('ha-backup-3').classList.add('active-backup');
                    document.getElementById('bond-status').textContent = "FAILOVER";
                    document.getElementById('bond-status').style.fill = "var(--accent-blue)";
                }, 500); // Slight delay to simulate protocol convergence time

                document.getElementById('sim-status').textContent = "CRITICAL ALERT: Router Failure Detected! SPOF Site Offline. HA Site Rerouting...";
                document.getElementById('sim-status').setAttribute("fill", "var(--danger)");
            }

            function resetSim() {
                // Reset Classes SPOF
                document.getElementById('spof-router').classList.remove('failed');
                document.querySelectorAll('.spof-link-downstream').forEach(el => {
                    el.classList.add('primary');
                    el.classList.remove('dead');
                });

                // Reset Classes HA
                document.getElementById('ha-router1').classList.remove('failed');
                document.querySelectorAll('.ha-conn').forEach(el => {
                    el.classList.add('primary');
                    el.classList.remove('dead');
                });
            
                // Reset Backups
                document.getElementById('ha-backup-1').classList.remove('active-backup');
                document.getElementById('ha-backup-2').classList.remove('active-backup');
                document.getElementById('ha-backup-3').classList.remove('active-backup');
            
                document.getElementById('bond-status').textContent = "O.K.";
                document.getElementById('bond-status').style.fill = "var(--success)";

                document.getElementById('sim-status').textContent = "System Normal. Traffic flowing on primary paths.";
                document.getElementById('sim-status').setAttribute("fill", "var(--black)");
            }
        </script>
    </div>
</body>
        
</html>